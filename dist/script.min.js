"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}var educationUrl="https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/for_user_education.json",geoUrl="https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/counties.json";document.addEventListener("DOMContentLoaded",function(){Promise.all([d3.json(educationUrl),d3.json(geoUrl)]).then(setData)});var h=600,w=960;d3.select(".container").append("svg").attr("width",960).attr("height",600);/**
 * Api Education object from FCC
 * @typedef {Object} Education
 * @property {String} area_name         - County Name
 * @property {Number} bachelorsOrHigher - Percentage of adults age 25 and older with a bachelor's degree or higher
 * @property {Number} fips              - county Id
 * @property {String} state             - State code (two letter)
 */ /**
 *
 * @param {[Education]} educationData
 * @param {UsAtlas} topology
 */function setData(a){var b=_slicedToArray(a,2),c=b[0],d=b[1],e=d3.geoPath(),f=c.reduce(function(a,b){var c=Math.max,d=Math.min;return a[b.fips]=b,a.min=d(b.bachelorsOrHigher,a.min),a.max=c(b.bachelorsOrHigher,a.max),a},{min:100,max:0}),g=topojson.feature(d,d.objects.counties),h=d3.schemeGreens[8],i=d3.scaleThreshold().domain(d3.range(f.min,f.max,9)).range(h),j=d3.select("#tooltip");d3.select("svg").call(function(a){//
// svg.selectAll('path2')
//     .data(states.features)
//     .enter()
//     .append('path')
//     .attr("d", path)
//     .attr('class', "state");
a.selectAll("path").data(g.features).enter().append("path").attr("d",e).attr("data-fips",function(a){return a.id}).attr("data-education",function(a){return f[a.id].bachelorsOrHigher}).attr("class","county").style("fill",function(a){return i(f[a.id].bachelorsOrHigher)}).on("mouseover",function(a){/**
                 * @type {Education}
                 */var b=f[a.id],c=d3.event,d=c.pageX,e=c.pageY;j.style("display","inline-block"),j.style("left","".concat(d,"px")),j.html("".concat(b.area_name,", ").concat(b.state,": ").concat(b.bachelorsOrHigher,"%")),j.style("top","".concat(e,"px")),j.attr("data-education",b.bachelorsOrHigher)}).on("mouseout",function(){j.style("display","none")}),a.append("path").attr("class","state").attr("d",e(topojson.mesh(d,d.objects.states,function(c,a){return c!==a}))),a.append("g").attr("id","legend").attr("transform","translate(".concat(600,",",30,")")).call(function(a){var b=10,c=f.min,d=f.max,e=(d-c)/h.length,g=d3.range(c,d,e).map(function(a){return a});console.log(g);var j=d3.scaleLinear().domain([c,d]).range([0,250]),k=d3.axisBottom(j).tickSizeOuter(0).tickFormat(d3.format(".1f")).tickValues(g.slice(1));a.selectAll("rect").data(g).enter().append("rect").style("fill",function(a){return i(a+.1)}).attr("width",function(a,b){return(j(g[b+1])||250)-j(a)}).attr("height",b).attr("x",function(a){return j(a)}).attr("y",0),a.append("g").attr("transform","translate(-0.5,".concat(b,")")).call(k)})})}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJlZHVjYXRpb25VcmwiLCJnZW9VcmwiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJQcm9taXNlIiwiYWxsIiwiZDMiLCJqc29uIiwidGhlbiIsInNldERhdGEiLCJoIiwidyIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJlZHVjYXRpb25EYXRhIiwidG9wb2xvZ3kiLCJwYXRoIiwiZ2VvUGF0aCIsIm1hcCIsInJlZHVjZSIsImFjYyIsIngiLCJNYXRoIiwibWF4IiwibWluIiwiZmlwcyIsImJhY2hlbG9yc09ySGlnaGVyIiwiY291bnRpZXMiLCJ0b3BvanNvbiIsImZlYXR1cmUiLCJvYmplY3RzIiwiY29sb3JzIiwic2NoZW1lR3JlZW5zIiwiY29sb3JTY2FsZSIsInNjYWxlVGhyZXNob2xkIiwiZG9tYWluIiwicmFuZ2UiLCJ0b29sdGlwIiwiY2FsbCIsInN2ZyIsInNlbGVjdEFsbCIsImRhdGEiLCJmZWF0dXJlcyIsImVudGVyIiwiZCIsImlkIiwic3R5bGUiLCJvbiIsImNvdW50eSIsImV2ZW50IiwicGFnZVgiLCJ5IiwicGFnZVkiLCJodG1sIiwiYXJlYV9uYW1lIiwic3RhdGUiLCJtZXNoIiwic3RhdGVzIiwiYSIsImIiLCJnIiwiaGVpZ2h0Iiwic3RlcCIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJsZWdlbmRTY2FsZSIsInNjYWxlTGluZWFyIiwiYXhpcyIsImF4aXNCb3R0b20iLCJ0aWNrU2l6ZU91dGVyIiwidGlja0Zvcm1hdCIsImZvcm1hdCIsInRpY2tWYWx1ZXMiLCJzbGljZSIsImkiXSwibWFwcGluZ3MiOiI4bkJBSU1BLENBQUFBLFlBQVksQ0FBRyxnRyxDQUNmQyxNQUFNLENBQUcsc0YsQ0FFZkMsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixrQkFBMUIsQ0FBOEMsVUFBWSxDQUN0REMsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ0MsRUFBRSxDQUFDQyxJQUFILENBQVFQLFlBQVIs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LENBQUMsQ0FBRyxDQUFMLENBQU4sQ0FBWCxLQUFELEVBQXVDVCxDQUFXLENBQUM3QyxDQUFELENBQTVELENBTG5CLEVBTUtSLElBTkwsQ0FNVSxRQU5WLENBTW9CZ0QsQ0FOcEIsRUFPS2hELElBUEwsQ0FPVSxHQVBWLENBT2UsU0FBQVEsQ0FBQyxRQUFJNkMsQ0FBQUEsQ0FBVyxDQUFDN0MsQ0FBRCxDQUFmLENBUGhCLEVBUUtSLElBUkwsQ0FRVSxHQVJWLENBUWUsQ0FSZixDQXJCUyxDQStCVCtDLENBQUMsQ0FBQ2hELE1BQUYsQ0FBUyxHQUFULEVBQ0tDLElBREwsQ0FDVSxXQURWLDBCQUN5Q2dELENBRHpDLE9BRUt2QixJQUZMLENBRVU4QixDQUZWLENBR0gsQ0FyQ0wsQ0F1Q0gsQ0FoRkQsQ0FtRkgiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiQHR5cGVzL2QzXCI7XG5pbXBvcnQgKiBhcyB0b3BvanNvbiBmcm9tIFwiQHR5cGVzL3RvcG9qc29uXCI7XG5cblxuY29uc3QgZWR1Y2F0aW9uVXJsID0gXCJodHRwczovL2Nkbi5mcmVlY29kZWNhbXAub3JnL3Rlc3RhYmxlLXByb2plY3RzLWZjYy9kYXRhL2Nob3JvcGxldGhfbWFwL2Zvcl91c2VyX2VkdWNhdGlvbi5qc29uXCI7XG5jb25zdCBnZW9VcmwgPSBcImh0dHBzOi8vY2RuLmZyZWVjb2RlY2FtcC5vcmcvdGVzdGFibGUtcHJvamVjdHMtZmNjL2RhdGEvY2hvcm9wbGV0aF9tYXAvY291bnRpZXMuanNvblwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgUHJvbWlzZS5hbGwoW2QzLmpzb24oZWR1Y2F0aW9uVXJsKSwgZDMuanNvbihnZW9VcmwpXSkudGhlbihzZXREYXRhKVxufSk7XG5cblxuY29uc3QgaCA9IDYwMCwgdyA9IDk2MDtcblxuZDMuc2VsZWN0KCcuY29udGFpbmVyJylcbiAgICAuYXBwZW5kKCdzdmcnKVxuICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGgpO1xuXG4vKipcbiAqIEFwaSBFZHVjYXRpb24gb2JqZWN0IGZyb20gRkNDXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFZHVjYXRpb25cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBhcmVhX25hbWUgICAgICAgICAtIENvdW50eSBOYW1lXG4gKiBAcHJvcGVydHkge051bWJlcn0gYmFjaGVsb3JzT3JIaWdoZXIgLSBQZXJjZW50YWdlIG9mIGFkdWx0cyBhZ2UgMjUgYW5kIG9sZGVyIHdpdGggYSBiYWNoZWxvcidzIGRlZ3JlZSBvciBoaWdoZXJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBmaXBzICAgICAgICAgICAgICAtIGNvdW50eSBJZFxuICogQHByb3BlcnR5IHtTdHJpbmd9IHN0YXRlICAgICAgICAgICAgIC0gU3RhdGUgY29kZSAodHdvIGxldHRlcilcbiAqL1xuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7W0VkdWNhdGlvbl19IGVkdWNhdGlvbkRhdGFcbiAqIEBwYXJhbSB7VXNBdGxhc30gdG9wb2xvZ3lcbiAqL1xuZnVuY3Rpb24gc2V0RGF0YShbZWR1Y2F0aW9uRGF0YSwgdG9wb2xvZ3ldKSB7XG5cbiAgICBjb25zdCBwYXRoID0gZDMuZ2VvUGF0aCgpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TWFwPFN0cmluZyxFZHVjYXRpb24+fVxuICAgICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtaW5cbiAgICAgKiBAcHJvcGVydHkge051bWJlcn0gbWF4XG4gICAgICovXG4gICAgY29uc3QgbWFwID0gZWR1Y2F0aW9uRGF0YS5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICBhY2NbeC5maXBzXSA9IHg7XG4gICAgICAgIGFjY1tcIm1pblwiXSA9IE1hdGgubWluKHguYmFjaGVsb3JzT3JIaWdoZXIsIGFjY1tcIm1pblwiXSk7XG4gICAgICAgIGFjY1tcIm1heFwiXSA9IE1hdGgubWF4KHguYmFjaGVsb3JzT3JIaWdoZXIsIGFjY1tcIm1heFwiXSk7XG4gICAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7bWluOiAxMDAsIG1heDogMH0pO1xuXG5cbiAgICBjb25zdCBjb3VudGllcyA9IHRvcG9qc29uLmZlYXR1cmUodG9wb2xvZ3ksIHRvcG9sb2d5Lm9iamVjdHMuY291bnRpZXMpO1xuICAgIC8vIGNvbnN0IHN0YXRlcyA9IHRvcG9qc29uLmZlYXR1cmUodG9wb2xvZ3ksIHRvcG9sb2d5Lm9iamVjdHMuc3RhdGVzKTtcblxuICAgIGNvbnN0IGNvbG9ycyA9IGQzLnNjaGVtZUdyZWVuc1s4XTtcbiAgICBjb25zdCBjb2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKS5kb21haW4oZDMucmFuZ2UobWFwLm1pbiwgbWFwLm1heCwgOSkpLnJhbmdlKGNvbG9ycyk7XG5cbiAgICBjb25zdCB0b29sdGlwID0gZDMuc2VsZWN0KCcjdG9vbHRpcCcpO1xuXG4gICAgZDMuc2VsZWN0KCdzdmcnKS5jYWxsKHN2ZyA9PiB7XG5cblxuICAgICAgICBzdmcuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgICAgICAgIC5kYXRhKGNvdW50aWVzLmZlYXR1cmVzKVxuICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1maXBzJywgZCA9PiBkLmlkKVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtZWR1Y2F0aW9uJywgZCA9PiBtYXBbZC5pZF0uYmFjaGVsb3JzT3JIaWdoZXIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCBcImNvdW50eVwiKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBjb2xvclNjYWxlKG1hcFtkLmlkXS5iYWNoZWxvcnNPckhpZ2hlcikpXG4gICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChjb3VudHkpID0+IHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtFZHVjYXRpb259XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IG1hcFtjb3VudHkuaWRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHtwYWdlWDogeCwgcGFnZVk6IHl9ID0gZDMuZXZlbnQ7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcImxlZnRcIiwgYCR7eH1weGApO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuaHRtbChgJHtkLmFyZWFfbmFtZX0sICR7ZC5zdGF0ZX06ICR7ZC5iYWNoZWxvcnNPckhpZ2hlcn0lYCk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcInRvcFwiLCBgJHt5fXB4YCk7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hdHRyKCdkYXRhLWVkdWNhdGlvbicsIGQuYmFjaGVsb3JzT3JIaWdoZXIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHN2Zy5zZWxlY3RBbGwoJ3BhdGgyJylcbiAgICAgICAgLy8gICAgIC5kYXRhKHN0YXRlcy5mZWF0dXJlcylcbiAgICAgICAgLy8gICAgIC5lbnRlcigpXG4gICAgICAgIC8vICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgLy8gICAgIC5hdHRyKFwiZFwiLCBwYXRoKVxuICAgICAgICAvLyAgICAgLmF0dHIoJ2NsYXNzJywgXCJzdGF0ZVwiKTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInN0YXRlXCIpXG4gICAgICAgICAgICAuYXR0cihcImRcIiwgcGF0aCh0b3BvanNvbi5tZXNoKHRvcG9sb2d5LCB0b3BvbG9neS5vYmplY3RzLnN0YXRlcywgZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSAhPT0gYjsgfSkpKTtcblxuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBcImxlZ2VuZFwiKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHs2MDB9LCR7MzB9KWApXG4gICAgICAgICAgICAuY2FsbCgoZykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gMjUwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IDEwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbiA9IG1hcC5taW47XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gbWFwLm1heDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gKG1heCAtIG1pbikgLyBjb2xvcnMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBkMy5yYW5nZShtaW4sIG1heCwgc3RlcCkubWFwKHggPT4geCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmFuZ2UpO1xuXG5cbiAgICAgICAgICAgICAgICBjb25zdCBsZWdlbmRTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihbbWluLCBtYXhdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSByYW5nZTtcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbShsZWdlbmRTY2FsZSlcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZDMuZm9ybWF0KFwiLjFmXCIpKVxuICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhyYW5nZS5zbGljZSgxKSlcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh2YWx1ZXMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yU2NhbGUoZCArIDAuMSkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICh4LCBpKSA9PiAobGVnZW5kU2NhbGUocmFuZ2VbaSArIDFdKSB8fCB3aWR0aCkgLSBsZWdlbmRTY2FsZSh4KSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCB4ID0+IGxlZ2VuZFNjYWxlKHgpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIDApXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgtMC41LCR7aGVpZ2h0fSlgKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbChheGlzKVxuICAgICAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG59XG4iXX0=